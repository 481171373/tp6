>* 版本: 1.0
>* 日期: 2020/4/21
# 客户资料字段管理
## 字段列表
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
字段列表 | http  | post | /index/CpField/fieldList | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
company_id | 是 | 否 | 企业id | 1
### 返回数据
```
{
    "code": 1,
    "msg": "成功",
    "data": [
        {
            "id": 1,//字段id （如果id:17 ，即字段名称为标签，编辑弹框有区别）
            "title": "学校",//字段名称
            "type": 0,//字段类型 1单行文本 2多行文本 3数字 4单选标签 5多选标签 6日期 7时间 8日期+时间 9附件
            "update_time": null,//更新时间
            "update_user_name": null,//更新用户名称
            "status": 1,//状态：1开启 2关闭
            "field_status": 0,//0不可修改状态 1可修改状态
            "edit_status": 0,//0不可编辑 1可编辑
            "delete_status": 0//0不可删除 1可删除,
            "label_list": [//标签信息
                {
                    "id": 3,//标签id
                    "label_name": "苹果",//标签名称
                    "color_info": ""//背景颜色 
                },
                {
                    "id": 4,
                    "label_name": "西瓜",
                    "color_info": null//无颜色
                }
            ],
        },
        {
            "id": 2,
            "title": "运动00",
            "type": 1,
            "update_time": 1599555728,
            "update_user_name": null,//更新用户名称
            "status": 1,//状态：1开启 2关闭
            "field_status": 1,
            "edit_status": 1,
            "delete_status": 1,
            "label_list": [],//标签信息
        }
    ]
}

```
***
## 添加字段
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
添加字段 | http  | post | /index/CpField/addField | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
company_id | 是 | 否 | 企业id | 1
title | 是 | 否 | 字段名称 | 123456
type | 是 | 否 | 字段类型 1单行文本 2多行文本 3数字 4单选标签 5多选标签 6日期 7时间 8日期+时间 9附件 | 1
label_list | 否 | 是 | 标签信息 当type字段类型为4/5 需要传 二维数组 按照排列顺序 | [['id'=>0,//添加标签传0,'label_name',//标签名称]]

### 返回数据
```
{
    "code": 1,
    "msg": "添加成功",
    "data": []
}

```
***
## 编辑字段
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
添加字段 | http  | post | /index/CpField/editField | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 企业id | 1
company_id | 是 | 否 | 企业id | 1
title | 是 | 否 | 字段名称 | 123456
type | 是 | 否 | 字段类型 1单行文本 2多行文本 3数字 4单选标签 5多选标签 6日期 7时间 8日期+时间 9附件 | 1
label_list | 否 | 是 | 标签信息 当type字段类型为4/5 需要传 二维数组 按照排列顺序 | [['id'=>0,//添加标签传0 修改标签传标签id,'label_name',//标签名称,'color_info':'',//背景颜色信息 无颜色传空 有颜色传
label_id | 否 | 是 | 待删除的标签信息（新增加的不需要传） 当type字段类型为4/5 删除的标签id字符串,组合 | 1,2,3
### 返回数据
```
{
    "code": 1,
    "msg": "编辑成功",
    "data": []
}
```
***
## 改变字段状态
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
改变字段状态 | http  | post | /index/CpField/changeFieldStatus | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 企业id | 1
status | 是 | 否 | 状态 1开启 2关闭 | 1
### 返回数据
```
{
    "code": 1,
    "msg": "停用成功",
    "data": []
}
```
***
## 删除字段
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
删除字段 | http  | post | /index/CpField/delField | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 字段id | 1
### 返回数据
```
{
    "code": 1,
    "msg": "删除成功",
    "data": []
}
```
***
# 跟进阶段设置
## 阶段列表
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
阶段列表 | http  | post | /index/CpFollowStage/stageInfo | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
company_id | 是 | 否 | 企业id | 1
### 返回数据
```
{
    "code": 1,
    "msg": "成功",
    "data": {
        "follow_stage": [//跟进阶段列表
            {
                "id": 1,//主键id
                "title": "新线索",//名称
            },
            {
                "id": 47,
                "title": "苹果",
            }
        ],
        "out_stage": {//输单模块
            "id": 9,//输单id
            "title": "呢呢",//输单名称
            "out_reason": [//输单理由列表
                {
                    "id": 11,//理由id
                    "title": "客户不想上课了",//理由描述
                },
                {
                    "id": 12,
                    "title": "课程无法满足客户要求",
                },
            ]
        },
        "fail_stage": {//无效模块
            "id": 10,//无效id
            "title": "无效客户",//无效名称
            "fail_reason": [//无效理由列表
                {
                    "id": 14,//理由id
                    "title": "多次联系不上",//理由描述
                },
                {
                    "id": 15,
                    "title": "空号",
                }
            ]
        }
    }
}

```
***
## 保存阶段设置
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
保存阶段设置 | http  | post | /index/CpFollowStage/saveStage | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
company_id | 是 | 否 | 企业id | 1
follow_stage | 否 | 是 | 跟进中阶段信息 二维数组 按照排列顺序 | [['id'=>0,//添加阶段传0 编辑传阶段id,'title',//阶段名称]]
out_title | 是 | 否 | 输单名称 | 1
out_reason | 否 | 是 | 输单理由 二维数组 按照排列顺序 | [['id'=>0,//添加理由传0 编辑传理由id,'title',//理由名称]]
fail_title | 是 | 否 | 无效名称 | 1
fail_reason | 否 | 是 | 无效理由 二维数组 按照排列顺序 | [['id'=>0,//添加理由传0 编辑传理由id,'title',//理由名称]]
del_stage_id | 是 | 否 | 删除跟进阶段id字符串,组合 | 1,2
del_out_reason_id | 是 | 否 | 删除输单理由id字符串,组合 | 1，2
del_fail_reason_id | 是 | 否 | 删除无效理由id字符串,组合 | 1,2

### 返回数据
```
{
    "code": 0,
    "msg": "跟进阶段重复",
    "data": []
}
{
    "code": 1,
    "msg": "保存成功",
    "data": []
}

```
***
# 客户模块
## 客户轨迹
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
客户轨迹 | http  | post | /index/CpCustomer/travelInfo | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
customer_id | 是 | 否 | 客户id | 1
### 返回数据
```
{
    "code": 1,
    "msg": "成功",
    "data": [
        {
            "id": 2,//轨迹id
            "title": "呢呢",//标题
            "desc": "姓名：zms<br/>星球：地球<br/>",//内容
            "create_time": 1599554052,//添加时间
            "way": 0,//轨迹类型 0：不可编辑的轨迹 反之为可编辑：1电话 2微信 3短信 4其它
            "operation_name": "陈总"//操作人名称
        },
        {
            "id": 1,
            "title": "哈哈",
            "desc": "下雨了凉快",
            "create_time": 1599554052,
            "way": 0,
            "operation_name": "陈总"
        }
    ]
}

```
***
## 编辑轨迹内容
### 接口信息

描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
编辑轨迹内容 | http  | post | /index/CpCustomer/editTravel | json
### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
travel_id | 是 | 否 | 轨迹id | 1
desc | 是 | 否 | 内容 | 1
### 返回数据
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}

```
***

# 管理
## 部门管理
### 部门列表
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
部门列表 | http  | post | /index/CpEmployeeBranch/sitTableList | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
pagesize | 是 | 否 | 页面大小 | 10
page | 是 | 否 | 当前页 | 1
name | 否 | 是 | 部门名称 | 嘎嘎
#### 数据返回
```
{
    "code": 1,
    "msg": "查询成功",
    "data": {
        "total": 2,
        "per_page": 11,
        "current_page": 1,
        "last_page": 1,
        "data": [
            {
                "id": 2,
                "name": "财务",   部门名称
                "company_id": 7,
                "is_del": 0,      是否已删除 0-否 1-是
                "create_time": "2020-09-10 15:14:59"
            }
        ]
    }
}
```

---

### 部门列表下拉框
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
部门列表下拉框 | http  | post | /index/CpEmployeeBranch/selectList | json

#### 数据返回
```
{
    "code": 1,
    "msg": "查询成功",
    "data": [
        {
            "id": 1,
            "name": "行政"
        }
    ]
}
```

---
### 部门添加
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
部门添加 | http  | post | /index/CpEmployeeBranch/branchAdd | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
name | 是 | 否 | 部门名称 | 嘎嘎
#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```

---
### 部门编辑
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
部门编辑 | http  | post | /index/CpEmployeeBranch/branchEdit | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
name | 是 | 否 | 部门名称 | 嘎嘎
id | 是 | 否 | 主键id | 嘎嘎
#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```

---
### 部门删除
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
部门删除 | http  | post | /index/CpEmployeeBranch/delete | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 主键id | 嘎嘎
#### 数据返回
```
{
    "code": 1,
    "msg": "删除成功",
    "data": []
}
```

---
## 员工管理
### 员工列表
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
员工列表 | http  | post | /index/CpEmployeeBranch/list | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
pagesize | 是 | 否 | 页面大小 | 10
page | 是 | 否 | 当前页 | 1
name | 否 | 是 | 部门名称 | 嘎嘎
power_id | 否 | 是 | 权限id   0 或空位全部 | 0 
branch_id | 否 | 是 | 部门id   0 或空位全部 | 0
#### 数据返回
```
{
    "code": 1,
    "msg": "查询成功",
    "data": {
        "total": 1,
        "per_page": 11,
        "current_page": 1,
        "last_page": 1,
        "data": [
            {
                "id": 12,
                "nickname": "哈哈嘻嘻",        姓名
                "username": "18955333313",    电话
                "create_time": "2020-09-10 16:26:55",
                "branch_id": 1,               部门id
                "power_id": 1,                权限id
                "is_del": 0,
                "power_name": "敢死队",       权限名称
                "branch_name": "行政"         部门名称
            }
        ]
    }
}
```

---
### 员工添加
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
员工添加 | http  | post | /index/CpEmployeeBranch/addEmployee | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
username | 是 | 否 | 手机号 | 18955553333
password | 是 | 否 | 密码 | 112442
nickname | 是 | 否 | 姓名 | xixi 
powerId | 是 | 否 | 权限id | 1
branchId | 是 | 否 | 部门id | 1

#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```

---
### 编辑员工
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
编辑员工 | http  | post | /index/CpEmployeeBranch/editEmployee | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 主键id | 1
username | 是 | 否 | 手机号 | 18955553333
nickname | 是 | 否 | 姓名 | xixi 
powerId | 是 | 否 | 权限id | 1
branchId | 是 | 否 | 部门id | 1

#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```

---
### 编辑查询
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
编辑查询 | http  | post | /index/CpEmployeeBranch/findEmployee | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 主键id | 1

#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": {
        "id": 12,
        "username": "18955333313",
        "nickname": "哈哈嘻嘻",
        "power_id": 1,
        "branch_id": 1
    }
}
```

---
### 员工删除
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
员工删除 | http  | post | /index/CpEmployeeBranch/delEmployee | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 主键id | 1
#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```
# 设置
## 坐席设置
### 坐席列表
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
坐席列表 | http  | post | /index/CpSitTableSet/sitTableList | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
pagesize | 是 | 否 | 页面大小 | 10
page | 是 | 否 | 当前页 | 1
bindStatus | 否 | 否 | 绑定状态: 0-未绑定 1-绑定 2-全部 | 2
status | 是 | 否 | 过期状态: 0-过期 1-正常 2-全部 | 2
name | 否 | 是 | 搜索：姓名、手机号、序号 | 嘎嘎
#### 数据返回
```
{
    "code": 1,
    "msg": "查询成功",
    "data": {
        "total": 2,
        "per_page": 11,
        "current_page": 1,
        "last_page": 1,
        "data": [
            {
                "id": 5,
                "start_time": 1599580800,     生效时间
                "expired_time": 1612886399,   失效时间
                "type": 1,                    坐席类型：0-体验 1-正式
                "company_id": 7,              企业id
                "status": 1,                  状态: 0-过期 1-正常
                "admin_id": 12,               绑定关联账号id
                "username": "18955333313",    手机号
                "nickname": "哈哈嘻嘻",       姓名
            }
        ]
    }
}
```

---
### 坐席绑定
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
坐席绑定 | http  | post | /index/CpSitTableSet/sitTableBind | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
user_id | 是 | 否 | 绑定关联账号id | 10
sitTableId | 是 | 否 | 坐席id | 1
#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```

---
### 坐席删除
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
坐席删除 | http  | post | /index/CpSitTableSet/delete | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 主键id | 10
#### 数据返回
```
{
    "code": 1,
    "msg": "删除成功",
    "data": []
}
```

---
# 权限管理
## 权限配置
### 权限组列表
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
权限组列表 | http  | post | /index/CpPowerGroup/list | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
pagesize | 是 | 否 | 页面大小 | 10
page | 是 | 否 | 当前页 | 1
relevanceId | 是 | 否 | 关联id | 1
#### 数据返回
```
{
    "code": 1,
    "msg": "查询成功",
    "data": {
        "total": 2,
        "per_page": 11,
        "current_page": 1,
        "last_page": 1,
        "data": [
            {
                "id": 1,
                "name": "敢死队",       名称
                "relevance_id": 1,      关联id
                "data": null,           权限数据
                "remark": "测试"        描述
            }
        ]
    }
}
```

---
### 权限组下拉选项
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
权限组下拉选项 | http  | post | /index/CpPowerGroup/selectList | json
#### 数据返回
```
{
    "code": 1,
    "msg": "查询成功",
    "data": [
        {
            "id": 3,
            "name": "测试"
        }
    ]
}
```

---
### 权限组添加
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
权限组添加 | http  | post | /index/CpPowerGroup/add | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
name | 是 | 否 | 权限组名称 | 管理员
data | 是 | 否 | 权限详细 | 
remark | 是 | 否 | 描述 | 嘻嘻哈哈
relevanceId | 是 | 否 | 关联id | 1
#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```

---
### 权限组编辑
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
权限组编辑 | http  | post | /index/CpPowerGroup/edit | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 主键id | 1
name | 是 | 否 | 权限组名称 | 管理员
data | 是 | 否 | 权限详细 | 
remark | 是 | 否 | 描述 | 嘻嘻哈哈
relevanceId | 是 | 否 | 关联id | 1
#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```

---
### 编辑查询
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
编辑查询 | http  | post | /index/CpPowerGroup/find | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 主键id | 1
#### 数据返回
```
{
    "code": 1,
    "msg": "查询成功",
    "data": {
        "name": "敢死队",   权限组名称
        "relevance_id": 1,  关联id
        "data": null,       权限
        "remark": "测试"    描述
    }
}
```

---
### 权限组删除
#### 接口信息
描述 | 协议 | 请求方式 | 请求地址 | 数据返回格式
---|---|---|---|---|
编辑查询 | http  | post | /index/CpPowerGroup/del | json
#### 请求参数
参数 | 是否必传 | 可否为空 | 说明   | 示例
---|---|---|---|---|
id | 是 | 否 | 主键id | 1
#### 数据返回
```
{
    "code": 1,
    "msg": "成功",
    "data": []
}
```